<Window x:Class="TextFilter.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
        xmlns:local="clr-namespace:TextFilter"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="TextFilter"
        Width="900"
        Height="600"
        AllowDrop="True"
        Drop="FileData_Drop"
        WindowStartupLocation="CenterOwner">

    <Window.Resources>
        <local:MainViewModel x:Key="mainViewModel" />
        <local:TextFilterSettings x:Key="settings" />
        <local:LogTabViewModel x:Key="logTabViewModel" />
        <local:FilterTabViewModel x:Key="filterTabViewModel" />

        <BooleanToVisibilityConverter x:Key="BoolToVis" />
        <ObjectDataProvider x:Key="colorsTypeOdp"
                            MethodName="GetType"
                            ObjectType="{x:Type sys:Type}">
            <ObjectDataProvider.MethodParameters>
                <sys:String>System.Windows.Media.Colors, PresentationCore, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35</sys:String>
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
        <ObjectDataProvider x:Key="colorPropertiesOdp"
                            MethodName="GetProperties"
                            ObjectInstance="{StaticResource colorsTypeOdp}" />
    </Window.Resources>

    <Window.InputBindings>

        <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                      Path=LogViewModel.CloseCommand}"
                    CommandParameter="{Binding}"
                    Gesture="Ctrl+F4" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                      Path=LogViewModel.ExportCommand}"
                    CommandParameter="{Binding}"
                    Gesture="Ctrl+E" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                      Path=LogViewModel.HideCommand}"
                    CommandParameter="{Binding}"
                    Gesture="Ctrl+H" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                      Path=FilterViewModel.GotoLineCommand}"
                    CommandParameter="{Binding}"
                    Gesture="Ctrl+Alt+G" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                      Path=LogViewModel.GotoLineCommand}"
                    CommandParameter="{Binding}"
                    Gesture="Ctrl+G" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                      Path=LogViewModel.ReloadCommand}"
                    CommandParameter="{Binding}"
                    Gesture="Ctrl+R" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                      Path=LogViewModel.OpenCommand}"
                    CommandParameter="{Binding}"
                    Gesture="Ctrl+O" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel}, Path=LogViewModel.RenameCommand}"
                    Gesture="F2" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                      Path=LogViewModel.SaveCommand}"
                    CommandParameter="{Binding}"
                    Gesture="Ctrl+S" />

        <KeyBinding Key="V"
                    Command="{Binding Source={StaticResource mainViewModel},
                                      Path=LogViewModel.PasteCommand}"
                    CommandParameter="{Binding}"
                    Modifiers="Control" />

        <KeyBinding Command="{Binding Source={StaticResource mainViewModel}, Path=FilterViewModel.RemoveFilterItemCommand}"
                    Gesture="Delete" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel}, Path=FilterViewModel.InsertFilterItemCommand}"
                    Gesture="Insert" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                      Path=FilterViewModel.CloseCommand}"
                    CommandParameter="{Binding}"
                    Gesture="Ctrl+Alt+F4" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel}, Path=FilterviewModel.HideCommand}"
                    CommandParameter="{Binding}" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                      Path=FilterViewModel.OpenCommand}"
                    CommandParameter="{Binding}"
                    Gesture="Ctrl+Alt+O" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                      Path=FilterViewModel.NewCommand}"
                    CommandParameter="{Binding}"
                    Gesture="Ctrl+Alt+N" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                      Path=FilterViewModel.ReloadCommand}"
                    CommandParameter="{Binding}"
                    Gesture="Ctrl+Alt+R" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                      Path=FilterViewModel.ReloadCommand}"
                    CommandParameter="{Binding}"
                    Gesture="F5" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel}, Path=FilterViewModel.RenameCommand}"
                    Gesture="Alt+F2" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                      Path=FilterViewModel.SaveCommand}"
                    CommandParameter="{Binding}"
                    Gesture="Ctrl+Alt+S" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel}, Path=FilterViewModel.HideCommand}"
                    Gesture="Ctrl+Alt+H" />
        <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                      Path=LogViewModel.ViewMessageCommand}"
                    CommandParameter="{Binding}"
                    Gesture="Ctrl+M" />
    </Window.InputBindings>

    <DockPanel Background="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}"
               DataContext="{StaticResource mainViewModel}">
        <Menu Background="{Binding Source={StaticResource settings},
                                   Path=Settings.BackgroundColor}"
              BorderBrush="{Binding Source={StaticResource settings},
                                    Path=Settings.ForegroundColor}"
              DockPanel.Dock="Top"
              Foreground="{Binding Source={StaticResource settings},
                                   Path=Settings.ForegroundColor}"
              Style="{DynamicResource MenuStyle1}">
            <MenuItem Header="_file">
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding LogViewModel.CloseCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_close file"
                          InputGestureText="Ctrl+F4"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding LogViewModel.CloseAllCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="close _all files"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding LogViewModel.CopyFilePathCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="copy file _path"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding Source={StaticResource mainViewModel},
                                            Path=LogViewModel.ExportCommand}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="export file"
                          InputGestureText="Ctrl+E"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding Source={StaticResource mainViewModel},
                                            Path=FilterViewModel.GotoLineCommand}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_goto filter"
                          InputGestureText="Ctrl+Alt+G"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding Source={StaticResource mainViewModel},
                                            Path=LogViewModel.GotoLineCommand}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_goto line"
                          InputGestureText="Ctrl+G"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding LogViewModel.OpenFolderCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="open containing _folder" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding LogViewModel.OpenCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_open file"
                          InputGestureText="Ctrl+O"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding LogViewModel.NewCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="open view in _new tab"
                          InputGestureText="Ctrl+N"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="recent files"
                          ItemsSource="{Binding LogViewModel.RecentCollection}"
                          Style="{DynamicResource MenuItemStyle1}">
                    <MenuItem.ItemContainerStyle>
                        <Style TargetType="{x:Type MenuItem}">
                            <Setter Property="MenuItem.Background"
                                    Value="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                            <Setter Property="MenuItem.BorderBrush"
                                    Value="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                            <Setter Property="MenuItem.Command"
                                    Value="{Binding Command}" />
                            <Setter Property="MenuItem.CommandParameter"
                                    Value="{Binding Text}" />

                            <Setter Property="MenuItem.Foreground"
                                    Value="{Binding Source={StaticResource settings}, Path=Settings.ForegroundColor}" />
                            <Setter Property="MenuItem.Header"
                                    Value="{Binding Text}" />
                        </Style>
                    </MenuItem.ItemContainerStyle>
                </MenuItem>
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding LogViewModel.ReloadCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_reload file"
                          InputGestureText="Ctrl+R"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding LogViewModel.RenameCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="rename file"
                          InputGestureText="F2"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding LogViewModel.SaveAsCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_save current view"
                          InputGestureText="Ctrl+S"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding Source={StaticResource mainViewModel},
                                            Path=LogViewModel.HideCommand}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="show / _hide all items"
                          InputGestureText="Ctrl+H"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding Source={StaticResource mainViewModel},
                                            Path=LogViewModel.ViewMessageCommand}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="view _message"
                          InputGestureText="Ctrl+M"
                          Style="{DynamicResource MenuItemStyle1}" />
            </MenuItem>
            <MenuItem Header="_filter">
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding FilterViewModel.CloseCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_close filter"
                          InputGestureText="Ctrl+Alt+F4"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding FilterViewModel.CloseAllCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="close _all filters"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding FilterViewModel.CopyFilePathCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="copy file _path"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding FilterViewModel.FilterNotesCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_filter notes"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding FilterViewModel.InsertFilterItemCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_insert filter item"
                          InputGestureText="Insert"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding FilterViewModel.NewCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_new filter"
                          InputGestureText="Ctrl+Alt+N"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding FilterViewModel.OpenFolderCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="open containing _folder"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding FilterViewModel.OpenCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_open filter"
                          InputGestureText="Ctrl+Alt+O"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="r_ecent filters"
                          ItemsSource="{Binding FilterViewModel.RecentCollection}"
                          Style="{DynamicResource MenuItemStyle1}">
                    <MenuItem.ItemContainerStyle>
                        <Style TargetType="{x:Type MenuItem}">
                            <Setter Property="MenuItem.Background"
                                    Value="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                            <Setter Property="MenuItem.BorderBrush"
                                    Value="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                            <Setter Property="MenuItem.Command"
                                    Value="{Binding Command}" />
                            <Setter Property="MenuItem.CommandParameter"
                                    Value="{Binding Text}" />
                            <Setter Property="MenuItem.Foreground"
                                    Value="{Binding Source={StaticResource settings}, Path=Settings.ForegroundColor}" />
                            <Setter Property="MenuItem.Header"
                                    Value="{Binding Text}" />
                        </Style>
                    </MenuItem.ItemContainerStyle>
                </MenuItem>
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding FilterViewModel.ReloadCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_reload filter"
                          InputGestureText="Ctrl+Alt+R"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding FilterViewModel.RemoveFilterItemCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_remove filter item"
                          InputGestureText="Delete"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding FilterViewModel.RenameCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="rename filter"
                          InputGestureText="Alt+F2"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding FilterViewModel.SaveCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_save filter"
                          InputGestureText="Ctrl+Alt+S"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding FilterViewModel.SaveAsCommand}"
                          CommandParameter="{Binding}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="save filter as"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="shared filters"
                          ItemsSource="{Binding Source={StaticResource mainViewModel},
                                                Path=FilterViewModel.SharedCollection}"
                          Style="{DynamicResource MenuItemStyle1}">
                    <MenuItem.ItemContainerStyle>
                        <Style TargetType="{x:Type MenuItem}">
                            <Setter Property="MenuItem.Background"
                                    Value="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                            <Setter Property="MenuItem.BorderBrush"
                                    Value="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                            <Setter Property="MenuItem.Foreground"
                                    Value="{Binding Source={StaticResource settings}, Path=Settings.ForegroundColor}" />
                        </Style>
                    </MenuItem.ItemContainerStyle>
                </MenuItem>
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding Source={StaticResource mainViewModel},
                                            Path=FilterViewModel.HideCommand}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="show / _hide filter view"
                          InputGestureText="Ctrl+Alt+H"
                          Style="{DynamicResource MenuItemStyle1}" />
            </MenuItem>
            <MenuItem Header="_options">
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding Source={StaticResource mainViewModel},
                                            Path=SettingsCommand}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_settings"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding Source={StaticResource mainViewModel},
                                            Path=DuplicateWindowCommand}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_duplicate window"
                          Style="{DynamicResource MenuItemStyle1}" />
            </MenuItem>
            <MenuItem Header="_help">
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding Source={StaticResource mainViewModel},
                                            Path=HelpCommand}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_online content"
                          Style="{DynamicResource MenuItemStyle1}" />
                <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                          Command="{Binding Source={StaticResource mainViewModel},
                                            Path=VersionCheckCommand}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          Header="_check for new version"
                          Style="{DynamicResource MenuItemStyle1}" />
            </MenuItem>
        </Menu>

        <Grid x:Name="GridMain"
              Margin="0,0,0,0"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch"
              Background="{Binding Source={StaticResource settings},
                                   Path=Settings.BackgroundColor}">
            <Grid.RowDefinitions>
                <RowDefinition Height="25" />
                <RowDefinition Height="{Binding Path=FilterViewModel.FilterHide, Mode=TwoWay}" />
                <RowDefinition Height="5" />
                <RowDefinition Height="75*" />
            </Grid.RowDefinitions>

            <!--  vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv STATUS / QUICK FILTER BOX vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv  -->

            <Grid x:Name="GridStatus"
                  Grid.Row="0"
                  Height="25"
                  HorizontalAlignment="Stretch"
                  VerticalAlignment="Top"
                  Background="{Binding Source={StaticResource settings},
                                       Path=Settings.BackgroundColor}">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="5" />
                    <ColumnDefinition Width="110" />
                    <ColumnDefinition Width="150" />
                </Grid.ColumnDefinitions>
                <Grid.InputBindings>
                    <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                                  Path=FilterViewModel.FindNextCommand}"
                                CommandParameter="QUICKFIND"
                                Gesture="F3" />
                    <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                                  Path=FilterViewModel.FindPreviousCommand}"
                                CommandParameter="QUICKFIND"
                                Gesture="Shift+F3" />
                </Grid.InputBindings>
                <ToggleButton Name="toggleButtonRegex"
                              Width="40"
                              Height="25"
                              Margin="0,0,96,0"
                              HorizontalAlignment="Right"
                              VerticalAlignment="Top"
                              Background="{Binding Source={StaticResource settings},
                                                   Path=Settings.BackgroundColor}"
                              BorderBrush="{Binding Source={StaticResource settings},
                                                    Path=Settings.ForegroundColor}"
                              Command="{Binding FilterViewModel.QuickFindChangedCommand}"
                              CommandParameter="{Binding ElementName=comboboxQuickFind}"
                              Content="regex"
                              Foreground="{Binding Source={StaticResource settings},
                                                   Path=Settings.ForegroundColor}"
                              IsChecked="{Binding Path=FilterViewModel.QuickFindRegex,
                                                  Mode=TwoWay}" />
                <ToggleButton Name="toggleButtonAND"
                              Width="30"
                              Height="25"
                              Margin="0,0,64,0"
                              HorizontalAlignment="Right"
                              VerticalAlignment="Top"
                              Background="{Binding Source={StaticResource settings},
                                                   Path=Settings.BackgroundColor}"
                              BorderBrush="{Binding Source={StaticResource settings},
                                                    Path=Settings.ForegroundColor}"
                              Command="{Binding FilterViewModel.QuickFindChangedCommand}"
                              CommandParameter="{Binding ElementName=comboboxQuickFind}"
                              Content="AND"
                              Foreground="{Binding Source={StaticResource settings},
                                                   Path=Settings.ForegroundColor}"
                              IsChecked="{Binding Path=FilterViewModel.QuickFindAnd,
                                                  Mode=TwoWay}" />
                <ToggleButton Name="toggleButtonOR"
                              Width="30"
                              Height="25"
                              Margin="0,0,32,0"
                              HorizontalAlignment="Right"
                              VerticalAlignment="Top"
                              Background="{Binding Source={StaticResource settings},
                                                   Path=Settings.BackgroundColor}"
                              BorderBrush="{Binding Source={StaticResource settings},
                                                    Path=Settings.ForegroundColor}"
                              Command="{Binding FilterViewModel.QuickFindChangedCommand}"
                              CommandParameter="{Binding ElementName=comboboxQuickFind}"
                              Content="OR"
                              Foreground="{Binding Source={StaticResource settings},
                                                   Path=Settings.ForegroundColor}"
                              IsChecked="{Binding Path=FilterViewModel.QuickFindOr,
                                                  Mode=TwoWay}" />
                <ToggleButton Name="toggleButtonNOT"
                              Width="30"
                              Height="25"
                              Margin="0,0,0,0"
                              HorizontalAlignment="Right"
                              VerticalAlignment="Top"
                              Background="{Binding Source={StaticResource settings},
                                                   Path=Settings.BackgroundColor}"
                              BorderBrush="{Binding Source={StaticResource settings},
                                                    Path=Settings.ForegroundColor}"
                              Command="{Binding FilterViewModel.QuickFindChangedCommand}"
                              CommandParameter="{Binding ElementName=comboboxQuickFind}"
                              Content="NOT"
                              Foreground="{Binding Source={StaticResource settings},
                                                   Path=Settings.ForegroundColor}"
                              IsChecked="{Binding Path=FilterViewModel.QuickFindNot,
                                                  Mode=TwoWay}" />
                <Label Name="labelQuickFind"
                       Grid.Column="0"
                       Width="75"
                       Height="25"
                       Margin="1,1,1,3"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Bottom"
                       Background="{Binding Source={StaticResource settings},
                                            Path=Settings.BackgroundColor}"
                       BorderBrush="{Binding Source={StaticResource settings},
                                             Path=Settings.BackgroundColor}"
                       Content="quick filter:"
                       Foreground="{Binding Source={StaticResource settings},
                                            Path=Settings.ForegroundColor}"
                       Style="{DynamicResource LabelStyle1}" />
                <ComboBox x:Name="comboboxQuickFind"
                          Grid.Column="0"
                          Height="25"
                          Margin="75,0,138,0"
                          HorizontalAlignment="Stretch"
                          VerticalAlignment="Top"
                          Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.ForegroundColor}"
                          BorderThickness="1"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                          IsEditable="True"
                          IsTextSearchEnabled="True"
                          ItemsSource="{Binding FilterViewModel.QuickFindList}"
                          ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                          SelectedIndex="{Binding FilterViewModel.QuickFindIndex}"
                          Text="{Binding FilterViewModel.QuickFindText}"
                          Style="{DynamicResource ComboBoxStyle1}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="GotFocus">
                            <i:InvokeCommandAction Command="{Binding Source={StaticResource mainViewModel}, Path=ControlGotFocusCommand}"
                                                   CommandParameter="{Binding ElementName=comboboxQuickFind}" />
                        </i:EventTrigger>
                        <i:EventTrigger EventName="LostFocus">
                            <i:InvokeCommandAction Command="{Binding Source={StaticResource mainViewModel}, Path=ControlLostFocusCommand}"
                                                   CommandParameter="{Binding ElementName=comboboxQuickFind}" />
                        </i:EventTrigger>
                        <!--  backspace uses this  -->
                        <i:EventTrigger EventName="KeyUp">
                            <i:InvokeCommandAction Command="{Binding Path=FilterViewModel.QuickFindKeyPressCommand}"
                                                   CommandParameter="{Binding ElementName=comboboxQuickFind}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>

                    <ComboBox.InputBindings>
                        <KeyBinding Key="Enter"
                                    Command="{Binding FilterViewModel.QuickFindChangedCommand}"
                                    CommandParameter="{Binding ElementName=comboboxQuickFind}" />
                        <KeyBinding Key="A"
                                    Modifiers="Control+Shift"
                                    Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.InsertFilterItemFromTextCommand}"
                                    CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=ComboBox}}" />
                        <KeyBinding Key="N"
                                    Modifiers="Control+Shift"
                                    Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.NewFromTextCommand}"
                                    CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=ComboBox}}" />


                    </ComboBox.InputBindings>
                </ComboBox>
                <GridSplitter Grid.Column="1"
                              Width="5"
                              Height="25"
                              HorizontalAlignment="Center"
                              Background="{Binding Source={StaticResource settings},
                                                   Path=Settings.BackgroundColor}"
                              Foreground="{Binding Source={StaticResource settings},
                                                   Path=Settings.ForegroundColor}" />

                <Button x:Name="buttonStatus"
                        Grid.Column="2"
                        Width="110"
                        Height="25"
                        Margin="0,0,0,0"
                        HorizontalContentAlignment="Left"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Bottom"
                        Background="{Binding Source={StaticResource settings},
                                             Path=Settings.BackgroundColor}"
                        BorderBrush="DeepSkyBlue"
                        BorderThickness="1"
                        Command="{Binding FilterViewModel.QuickFindChangedCommand}"
                        CommandParameter="{Binding ElementName=buttonStatus}"
                        Content="{Binding Source={StaticResource mainViewModel},
                                          Path=CurrentStatus}"
                        FontSize="12"
                        Foreground="DeepSkyBlue"
                        Padding="5,1,0,1" />

                <Label Name="labelLineTotals"
                       Grid.Column="3"
                       Width="40"
                       Height="25"
                       Margin="0,0,0,0"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Bottom"
                       Background="{Binding Source={StaticResource settings},
                                            Path=Settings.BackgroundColor}"
                       BorderBrush="{Binding Source={StaticResource settings},
                                             Path=Settings.ForegroundColor}"
                       Content="lines:"
                       Foreground="{Binding Source={StaticResource settings},
                                            Path=Settings.ForegroundColor}"
                       Style="{DynamicResource LabelStyle1}" />

                <TextBox Name="textboxLineTotals"
                         Grid.Column="3"
                         Height="25"
                         Margin="40,0,0,0"
                         HorizontalAlignment="Stretch"
                         VerticalAlignment="Bottom"
                         Background="{Binding Source={StaticResource settings},
                                              Path=Settings.BackgroundColor}"
                         BorderBrush="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                         BorderThickness="1"
                         Foreground="{Binding Source={StaticResource settings},
                                              Path=Settings.ForegroundColor}"
                         IsReadOnly="True"
                         Style="{DynamicResource TextBoxStyle1}"
                         Text="{Binding Path=LogViewModel.LineTotals}" />
            </Grid>

            <!--  vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv FILTER FILE DATA vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv  -->
            <TabControl x:Name="tabFilters"
                        Focusable="True"
                        Grid.Row="1"
                        Margin="0,0,0,0"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        BorderBrush="{Binding Source={StaticResource settings},
                                              Path=Settings.ForegroundColor}"
                        ItemsSource="{Binding Path=FilterViewModel.TabItems}"
                        SelectedIndex="{Binding Path=FilterViewModel.SelectedIndex,
                                                Mode=TwoWay,
                                                NotifyOnSourceUpdated=True,
                                                NotifyOnTargetUpdated=True}">

                <TabControl.InputBindings>
                    <KeyBinding Key="Insert"
                                Command="{Binding Path=FilterViewModel.InsertFilterItemCommand}" />
                    <KeyBinding Key="Delete"
                                Command="{Binding Path=FilterViewModel.RemoveFilterItemCommand}" />
                </TabControl.InputBindings>
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="GotFocus">
                        <i:InvokeCommandAction Command="{Binding FilterViewModel.GotFocusCommand}"
                                               CommandParameter="{Binding}" />
                    </i:EventTrigger>
                    <i:EventTrigger EventName="MouseLeave">
                        <i:InvokeCommandAction Command="{Binding FilterViewModel.LostFocusCommand}"
                                               CommandParameter="{Binding}" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>
                <TabControl.ItemTemplate>
                    <DataTemplate>

                        <TextBlock Margin="-4,0,-4,-2"
                                   Background="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                   Foreground="{Binding Source={StaticResource settings},
                                                        Path=Settings.ForegroundColor}"
                                   Text="{Binding Path=Header}" />
                    </DataTemplate>
                </TabControl.ItemTemplate>
                <TabControl.Background>
                    <VisualBrush>
                        <VisualBrush.Visual>
                            <Grid Width="{Binding Path=ActualWidth, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TabControl}}, Mode=OneWay}"
                                  Height="{Binding Path=ActualHeight, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TabControl}}, Mode=OneWay}">
                                <Rectangle Fill="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                                <Image HorizontalAlignment="Left"
                                       VerticalAlignment="Top"
                                       Opacity="1"
                                       Source="../Resources/Filter.png"
                                       Stretch="None" />
                            </Grid>
                        </VisualBrush.Visual>
                    </VisualBrush>
                </TabControl.Background>
                <TabControl.ContentTemplate x:Uid="tabContent">

                    <DataTemplate>
                        <DataGrid x:Name="filterFileData"
                                  Grid.Row="0"
                                  Margin="0,0,0,0"
                                  HorizontalAlignment="Stretch"
                                  VerticalAlignment="Stretch"
                                  AutoGenerateColumns="False"
                                  Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  CanUserAddRows="False"
                                  ItemsSource="{Binding Path=ContentList,
                                                        Mode=TwoWay}"
                                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                  ScrollViewer.VerticalScrollBarVisibility="Auto"
                                  Tag="{Binding}">

                            <DataGrid.Resources>
                                <local:BindingProxy x:Key="proxyFilter"
                                                    Data="{Binding}" />
                            </DataGrid.Resources>

                            <DataGrid.CellStyle>
                                <Style TargetType="DataGridCell">
                                    <Style.Setters>
                                        <Setter Property="Background"
                                                Value="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                                        <Setter Property="Foreground"
                                                Value="{Binding Source={StaticResource settings}, Path=Settings.ForegroundColor}" />
                                        <Setter Property="FontSize"
                                                Value="{Binding Source={StaticResource settings}, Path=Settings.FontSize}" />
                                        <Setter Property="FontFamily"
                                                Value="{Binding Source={StaticResource settings}, Path=Settings.FontName}" />
                                    </Style.Setters>
                                </Style>
                            </DataGrid.CellStyle>

                            <DataGrid.InputBindings>
                                <KeyBinding Key="C"
                                            Command="{Binding CopyCommand}"
                                            CommandParameter="{Binding Path=ContentList}"
                                            Modifiers="Control" />
                                <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                                              Path=FilterViewModel.FindNextCommand}"
                                            CommandParameter="{Binding}"
                                            Gesture="F3" />
                                <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                                              Path=FilterViewModel.FindPreviousCommand}"
                                            CommandParameter="{Binding}"
                                            Gesture="Shift+F3" />
                                <KeyBinding Key="N"
                                            Modifiers="Control+Shift"
                                            Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.NewFromTextCommand}"
                                            CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                <KeyBinding Key="Q"
                                            Modifiers="Control+Shift"
                                            Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.QuickFindTextCommand}"
                                            CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGrid}}" />

                            </DataGrid.InputBindings>
                            <DataGrid.ContextMenu>
                                <ContextMenu HasDropShadow="True">
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding CopyCommand}"
                                              CommandParameter="{Binding Path=ContentList}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="copy"
                                              InputGestureText="Ctrl+C"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.CloseCommand}"
                                              CommandParameter="{Binding}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="close filter"
                                              InputGestureText="Ctrl+Alt+F4"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.CloseAllCommand}"
                                              CommandParameter="{Binding}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="close all filters"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.CopyFilePathCommand}"
                                              CommandParameter="{Binding}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="copy file path"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.FindNextCommand}"
                                              CommandParameter="{Binding}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="find next"
                                              InputGestureText="F3"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.FindPreviousCommand}"
                                              CommandParameter="{Binding}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="find previous"
                                              InputGestureText="Shift+F3"
                                              Style="{DynamicResource MenuItemStyle1}" />

                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.InsertFilterItemCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="insert filter item"
                                              InputGestureText="Insert"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.NewCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="new filter"
                                              InputGestureText="Ctrl+Alt+N"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.OpenFolderCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="open containing folder"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.OpenCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="open filter"
                                              InputGestureText="Ctrl+Alt+O"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding PasteCommand}"
                                              CommandParameter="{Binding Path=ContentList}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="paste"
                                              InputGestureText="Ctrl+V"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="r_ecent filters"
                                              ItemsSource="{Binding Source={StaticResource mainViewModel},
                                                                    Path=FilterViewModel.RecentCollection}"
                                              Style="{DynamicResource MenuItemStyle1}">
                                        <MenuItem.ItemContainerStyle>
                                            <Style TargetType="{x:Type MenuItem}">
                                                <Setter Property="MenuItem.Background"
                                                        Value="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                                                <Setter Property="MenuItem.BorderBrush"
                                                        Value="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                                                <Setter Property="MenuItem.Command"
                                                        Value="{Binding Command}" />
                                                <Setter Property="MenuItem.CommandParameter"
                                                        Value="{Binding Text}" />
                                                <Setter Property="MenuItem.Foreground"
                                                        Value="{Binding Source={StaticResource settings}, Path=Settings.ForegroundColor}" />
                                                <Setter Property="MenuItem.Header"
                                                        Value="{Binding Text}" />
                                            </Style>
                                        </MenuItem.ItemContainerStyle>
                                    </MenuItem>
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.ReloadCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="reload filter"
                                              InputGestureText="Ctrl+Alt+R"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.RemoveFilterItemCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="remove filter item"
                                              InputGestureText="Delete"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.SaveCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="save filter"
                                              InputGestureText="Ctrl+Alt+S"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.SaveAsCommand}"
                                              CommandParameter="{Binding}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="save filter as"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="shared filters"
                                              ItemsSource="{Binding Source={StaticResource mainViewModel},
                                                                    Path=FilterViewModel.SharedCollection}"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                </ContextMenu>
                            </DataGrid.ContextMenu>
                            <DataGrid.Columns>
                                <DataGridTextColumn Binding="{Binding Path=Index}"
                                                    Header="Index"
                                                    SortDirection="Ascending" />
                                <DataGridCheckBoxColumn Binding="{Binding Path=Enabled}"
                                                        Header="Enabled" />
                                <DataGridCheckBoxColumn Binding="{Binding Path=Exclude}"
                                                        Header="Exclude" />
                                <DataGridCheckBoxColumn Binding="{Binding Path=Regex}"
                                                        Header="Regex" />

                                <DataGridTextColumn Width="{Binding Source={StaticResource settings},
                                                                    Path=Settings.ContentColumnSize}"
                                                    Binding="{Binding Path=Filterpattern,
                                                                      Mode=TwoWay,
                                                                      NotifyOnSourceUpdated=True,
                                                                      NotifyOnTargetUpdated=True}"
                                                    Header="Filter Pattern">
                                    <DataGridTextColumn.CellStyle>
                                        <Style TargetType="DataGridCell">
                                            <Style.Setters>
                                                <Setter Property="Background"
                                                        Value="{Binding Path=BackgroundColor, Mode=TwoWay, NotifyOnSourceUpdated=True, NotifyOnTargetUpdated=True}" />
                                                <Setter Property="Foreground"
                                                        Value="{Binding Path=ForegroundColor, Mode=TwoWay, NotifyOnSourceUpdated=True, NotifyOnTargetUpdated=True}" />
                                                <Setter Property="FontSize"
                                                        Value="{Binding Source={StaticResource settings}, Path=Settings.FontSize}" />
                                                <Setter Property="FontFamily"
                                                        Value="{Binding Source={StaticResource settings}, Path=Settings.FontName}" />
                                            </Style.Setters>
                                        </Style>
                                    </DataGridTextColumn.CellStyle>
                                    <DataGridTextColumn.ElementStyle>
                                        <Style>
                                            <Setter Property="TextBlock.TextWrapping"
                                                    Value="{Binding Source={StaticResource settings}, Path=Settings.WordWrapString}" />
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Binding="{Binding Path=Count}"
                                                    Header="Count"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding Path=MaskedCount}"
                                                    Header="MaskedCount"
                                                    Visibility="{Binding Data.MaskedVisibility,
                                                                         Source={StaticResource proxyFilter},
                                                                         Converter={StaticResource BoolToVis}}" />

                                <DataGridTemplateColumn Header="Background Color">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <ComboBox Name="backgroundColorCombo"
                                                      GotFocus="colorCombo_Selected"
                                                      ItemsSource="{Binding Source={StaticResource colorPropertiesOdp}}"
                                                      KeyDown="colorCombo_KeyDown"
                                                      SelectedValue="{Binding BackgroundColor,
                                                                              Mode=TwoWay,
                                                                              UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValuePath="Name"
                                                      VirtualizingStackPanel.IsVirtualizing="True"
                                                      VirtualizingStackPanel.VirtualizationMode="Recycling">
                                                <ComboBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock Width="20"
                                                                       Height="15"
                                                                       Margin="0,0,5,0"
                                                                       Background="{Binding Name}" />
                                                            <TextBlock Name="backgroundColorText"
                                                                       FontSize="12"
                                                                       Text="{Binding Name}" />
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </ComboBox.ItemTemplate>
                                            </ComboBox>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <DataGridTemplateColumn Header="Foreground Color">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <ComboBox Name="foregroundColorCombo"
                                                      GotFocus="colorCombo_Selected"
                                                      ItemsSource="{Binding Source={StaticResource colorPropertiesOdp}}"
                                                      KeyDown="colorCombo_KeyDown"
                                                      SelectedValue="{Binding ForegroundColor,
                                                                              Mode=TwoWay,
                                                                              UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValuePath="Name"
                                                      VirtualizingStackPanel.IsVirtualizing="True"
                                                      VirtualizingStackPanel.VirtualizationMode="Recycling">
                                                <ComboBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock Width="20"
                                                                       Height="15"
                                                                       Margin="0,0,5,0"
                                                                       Background="{Binding Name}" />
                                                            <TextBlock FontSize="12"
                                                                       Text="{Binding Name}" />
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </ComboBox.ItemTemplate>
                                            </ComboBox>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <DataGridTextColumn Width="{Binding Source={StaticResource settings},
                                                                    Path=Settings.ContentColumnSize}"
                                                    Binding="{Binding Path=Notes}"
                                                    Header="Notes">

                                    <DataGridTextColumn.ElementStyle>
                                        <Style>
                                            <Setter Property="TextBlock.TextWrapping"
                                                    Value="{Binding Source={StaticResource settings}, Path=Settings.WordWrapString}" />
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                            </DataGrid.Columns>
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="SourceUpdated">
                                    <i:InvokeCommandAction Command="{Binding SourceUpdatedCommand}"
                                                           CommandParameter="{Binding ElementName=filterFileData}" />
                                </i:EventTrigger>
                                <i:EventTrigger EventName="SelectionChanged">
                                    <i:InvokeCommandAction Command="{Binding SelectionChangedCommand}"
                                                           CommandParameter="{Binding ElementName=filterFileData}" />
                                </i:EventTrigger>
                                <i:EventTrigger EventName="LayoutUpdated">
                                    <i:InvokeCommandAction Command="{Binding SetViewerCommand}"
                                                           CommandParameter="{Binding ElementName=filterFileData}" />
                                </i:EventTrigger>
                                <i:EventTrigger EventName="PreviewKeyDown">
                                    <i:InvokeCommandAction Command="{Binding KeyDownCommand}"
                                                           CommandParameter="{Binding}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </DataGrid>
                    </DataTemplate>
                </TabControl.ContentTemplate>
                <TabControl.ContextMenu>
                    <ContextMenu HasDropShadow="True">
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding FilterViewModel.CloseCommand}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="close filter"
                                  InputGestureText="Ctrl+Alt+F4"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding FilterViewModel.CloseAllCommand}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="close all filters"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding FilterViewModel.CopyFilePathCommand}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="copy file path"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding FilterViewModel.FilterNotesCommand}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="filter notes"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding Source={StaticResource mainViewModel},
                                                    Path=FilterViewModel.FindNextCommand}"
                                  CommandParameter="{Binding}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="find next"
                                  InputGestureText="F3"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding Source={StaticResource mainViewModel},
                                                    Path=FilterViewModel.FindPreviousCommand}"
                                  CommandParameter="{Binding}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="find previous"
                                  InputGestureText="Shift+F3"
                                  Style="{DynamicResource MenuItemStyle1}" />

                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding FilterViewModel.NewCommand}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="new filter"
                                  InputGestureText="Ctrl+Alt+N"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding FilterViewModel.OpenFolderCommand}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="open containing folder"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding FilterViewModel.OpenCommand}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="open filter"
                                  InputGestureText="Ctrl+Alt+O"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="r_ecent filters"
                                  ItemsSource="{Binding Source={StaticResource mainViewModel},
                                                        Path=FilterViewModel.RecentCollection}"
                                  Style="{DynamicResource MenuItemStyle1}">
                            <MenuItem.ItemContainerStyle>
                                <Style TargetType="{x:Type MenuItem}">
                                    <Setter Property="MenuItem.Background"
                                            Value="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                                    <Setter Property="MenuItem.BorderBrush"
                                            Value="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                                    <Setter Property="MenuItem.Command"
                                            Value="{Binding Command}" />
                                    <Setter Property="MenuItem.CommandParameter"
                                            Value="{Binding Text}" />
                                    <Setter Property="MenuItem.Foreground"
                                            Value="{Binding Source={StaticResource settings}, Path=Settings.ForegroundColor}" />
                                    <Setter Property="MenuItem.Header"
                                            Value="{Binding Text}" />
                                </Style>
                            </MenuItem.ItemContainerStyle>
                        </MenuItem>
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding FilterViewModel.ReloadCommand}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="reload filter"
                                  InputGestureText="Ctrl+Alt+R"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding FilterViewModel.RenameCommand}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="rename filter"
                                  InputGestureText="Alt+F2"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding FilterViewModel.SaveCommand}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="save filter"
                                  InputGestureText="Ctrl+Alt+S"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding FilterViewModel.SaveAsCommand}"
                                  CommandParameter="{Binding}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="save filter as"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="shared filters"
                                  ItemsSource="{Binding Source={StaticResource mainViewModel},
                                                        Path=FilterViewModel.SharedCollection}"
                                  Style="{DynamicResource MenuItemStyle1}" />
                    </ContextMenu>
                </TabControl.ContextMenu>
            </TabControl>
            <GridSplitter Grid.Row="2"
                          Height="10"
                          HorizontalAlignment="Stretch"
                          Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                          Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}" />

            <!--  vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv LOG FILE DATA vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv  -->

            <TabControl x:Name="tabLogs"
                        Grid.Row="3"
                        HorizontalAlignment="Stretch"
                        Focusable="True"
                        VerticalAlignment="Stretch"
                        BorderBrush="{Binding Source={StaticResource settings},
                                              Path=Settings.ForegroundColor}"
                        ItemsSource="{Binding Path=LogViewModel.TabItems}"
                        SelectedIndex="{Binding Path=LogViewModel.SelectedIndex,
                                                Mode=TwoWay,
                                                NotifyOnSourceUpdated=True,
                                                NotifyOnTargetUpdated=True}">

                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="GotFocus">
                        <i:InvokeCommandAction Command="{Binding LogViewModel.GotFocusCommand}"
                                               CommandParameter="{Binding}" />
                    </i:EventTrigger>
                    <i:EventTrigger EventName="MouseLeave">
                        <i:InvokeCommandAction Command="{Binding LogViewModel.LostFocusCommand}"
                                               CommandParameter="{Binding}" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>
                <TabControl.Background>
                    <VisualBrush>
                        <VisualBrush.Visual>
                            <Grid Width="{Binding Path=ActualWidth, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TabControl}}, Mode=OneWay}"
                                  Height="{Binding Path=ActualHeight, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TabControl}}, Mode=OneWay}">
                                <Rectangle Fill="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                                <Image HorizontalAlignment="Left"
                                       VerticalAlignment="Top"
                                       Opacity="1"
                                       Source="../Resources/File.png"
                                       Stretch="None" />
                            </Grid>
                        </VisualBrush.Visual>
                    </VisualBrush>
                </TabControl.Background>
                <TabControl.ItemTemplate>

                    <DataTemplate>
                        <TextBlock Margin="-4,0,-4,-2"
                                   Background="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                   Foreground="{Binding Source={StaticResource settings},
                                                        Path=Settings.ForegroundColor}"
                                   Text="{Binding Path=Header}" />
                    </DataTemplate>
                </TabControl.ItemTemplate>
                <TabControl.ContentTemplate x:Uid="logFileContent">

                    <DataTemplate>
                        <DataGrid x:Name="logFileData"
                                  Margin="0,0,0,0"
                                  HorizontalAlignment="Stretch"
                                  VerticalAlignment="Stretch"
                                  AutoGenerateColumns="False"
                                  Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.ForegroundColor}"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  CanUserReorderColumns="True"
                                  GridLinesVisibility="None"
                                  IsReadOnly="False"
                                  ItemsSource="{Binding Path=ContentList}"
                                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                  ScrollViewer.VerticalScrollBarVisibility="Auto"
                                  SelectionMode="Extended"
                                  SelectionUnit="FullRow"
                                  Tag="{Binding}"
                                  VirtualizingStackPanel.IsVirtualizing="True"
                                  VirtualizingStackPanel.VirtualizationMode="Recycling">

                            <DataGrid.Resources>
                                <local:BindingProxy x:Key="proxyLog"
                                                    Data="{Binding}" />
                            </DataGrid.Resources>

                            <DataGrid.CellStyle>
                                <Style TargetType="DataGridCell">
                                    <Style.Setters>
                                        <Setter Property="Background"
                                                Value="{Binding Path=Background}" />
                                        <Setter Property="Foreground"
                                                Value="{Binding Path=Foreground}" />
                                        <Setter Property="FontSize"
                                                Value="{Binding Source={StaticResource settings}, Path=Settings.FontSize}" />
                                        <Setter Property="FontFamily"
                                                Value="{Binding Source={StaticResource settings}, Path=Settings.FontName}" />
                                        <Setter Property="BorderThickness"
                                                Value="1" />
                                        <Setter Property="BorderBrush"
                                                Value="{Binding Path=Background}" />
                                    </Style.Setters>
                                    <Style.Triggers>
                                        <Trigger Property="IsSelected"
                                                 Value="True">
                                            <Setter Property="BorderBrush"
                                                    Value="{Binding Path=Foreground}" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </DataGrid.CellStyle>

                            <DataGrid.Columns>
                                <DataGridTextColumn Binding="{Binding Path=FilterIndex}"
                                                    Header="FilterIndex"
                                                    Visibility="{Binding Data.FilterIndexVisibility,
                                                                         Source={StaticResource proxyLog},
                                                                         Converter={StaticResource BoolToVis}}" />

                                <DataGridTextColumn Binding="{Binding Path=Index}"
                                                    Header="Index"
                                                    SortDirection="Ascending" />
                                <DataGridTextColumn Width="{Binding Source={StaticResource settings},
                                                                    Path=Settings.ContentColumnSize}"
                                                    Binding="{Binding Path=Content}"
                                                    Header="Content">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style>
                                            <Setter Property="TextBlock.TextWrapping"
                                                    Value="{Binding Source={StaticResource settings}, Path=Settings.WordWrapString}" />
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                    <DataGridTextColumn.EditingElementStyle>
                                        <Style TargetType="TextBox">
                                            <Setter Property="ContextMenu">
                                                <Setter.Value>
                                                    <ContextMenu>
                                                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                                                  BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                                                  Command="{Binding Source={StaticResource mainViewModel},
                                                                    Path=FilterViewModel.InsertFilterItemFromTextCommand}"
                                                                  CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=ContextMenu}, Path=PlacementTarget}"
                                                                  Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                                                  InputGestureText="Ctrl+Shift+A"
                                                                  Header="add to existing filter"
                                                                  Style="{DynamicResource MenuItemStyle1}" />
                                                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                                                  BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                                                  Command="{Binding Source={StaticResource mainViewModel},
                                                                    Path=FilterViewModel.NewFromTextCommand}"
                                                                  CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=ContextMenu}, Path=PlacementTarget}"
                                                                  Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                                                  InputGestureText="Ctrl+Shift+N"
                                                                  Header="add to new filter"
                                                                  Style="{DynamicResource MenuItemStyle1}" />
                                                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                                                  BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                                                  Command="Copy"
                                                                  Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                                                  Header="copy"
                                                                  InputGestureText="Ctrl+C"
                                                                  Style="{DynamicResource MenuItemStyle1}" />
                                                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                                                  BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                                                  Command="Paste"
                                                                  Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                                                  InputGestureText="Ctrl+V"
                                                                  Header="paste"
                                                                  Style="{DynamicResource MenuItemStyle1}" />
                                                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                                                  BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                                                  Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.QuickFindTextCommand}"
                                                                  CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=ContextMenu}, Path=PlacementTarget}"
                                                                  Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                                                  InputGestureText="Ctrl+Shift+Q"
                                                                  Header="quick filter"
                                                                  Style="{DynamicResource MenuItemStyle1}" />
                                                    </ContextMenu>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </DataGridTextColumn.EditingElementStyle>
                                </DataGridTextColumn>

                                <DataGridTextColumn Width="50*"
                                                    Binding="{Binding Path=Group1}"
                                                    Header="Group1"
                                                    Visibility="{Binding Data.Group1Visibility,
                                                                         Source={StaticResource proxyLog},
                                                                         Converter={StaticResource BoolToVis}}">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style>
                                            <Setter Property="TextBlock.TextWrapping"
                                                    Value="{Binding Source={StaticResource settings}, Path=Settings.WordWrapString}" />
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Width="50*"
                                                    Binding="{Binding Path=Group2}"
                                                    Header="Group2"
                                                    Visibility="{Binding Data.Group2Visibility,
                                                                         Source={StaticResource proxyLog},
                                                                         Converter={StaticResource BoolToVis}}">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style>
                                            <Setter Property="TextBlock.TextWrapping"
                                                    Value="{Binding Source={StaticResource settings}, Path=Settings.WordWrapString}" />
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Width="50*"
                                                    Binding="{Binding Path=Group3}"
                                                    Header="Group3"
                                                    Visibility="{Binding Data.Group3Visibility,
                                                                         Source={StaticResource proxyLog},
                                                                         Converter={StaticResource BoolToVis}}">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style>
                                            <Setter Property="TextBlock.TextWrapping"
                                                    Value="{Binding Source={StaticResource settings}, Path=Settings.WordWrapString}" />
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn Width="50*"
                                                    Binding="{Binding Path=Group4}"
                                                    Header="Group4"
                                                    Visibility="{Binding Data.Group4Visibility,
                                                                         Source={StaticResource proxyLog},
                                                                         Converter={StaticResource BoolToVis}}">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style>
                                            <Setter Property="TextBlock.TextWrapping"
                                                    Value="{Binding Source={StaticResource settings}, Path=Settings.WordWrapString}" />
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                            </DataGrid.Columns>

                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="SourceUpdated">
                                    <i:InvokeCommandAction Command="{Binding SourceUpdatedCommand}"
                                                           CommandParameter="{Binding ElementName=logFileData}" />
                                </i:EventTrigger>
                                <i:EventTrigger EventName="SelectionChanged">
                                    <i:InvokeCommandAction Command="{Binding SelectionChangedCommand}"
                                                           CommandParameter="{Binding ElementName=logFileData}" />
                                </i:EventTrigger>
                                <i:EventTrigger EventName="LayoutUpdated">
                                    <i:InvokeCommandAction Command="{Binding SetViewerCommand}"
                                                           CommandParameter="{Binding ElementName=logFileData}" />
                                </i:EventTrigger>
                                <i:EventTrigger EventName="PreviewKeyDown">
                                    <i:InvokeCommandAction Command="{Binding KeyDownCommand}"
                                                           CommandParameter="{Binding}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>

                            <DataGrid.InputBindings>
                                <KeyBinding Key="C"
                                            Command="{Binding CopyCommand}"
                                            Modifiers="Control" />
                                <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                                              Path=LogViewModel.FindPreviousCommand}"
                                            CommandParameter="{Binding}"
                                            Gesture="Shift+F3" />
                                <KeyBinding Command="{Binding Source={StaticResource mainViewModel},
                                                              Path=LogViewModel.FindNextCommand}"
                                            CommandParameter="{Binding}"
                                            Gesture="F3" />
                                <KeyBinding Key="A"
                                            Modifiers="Control+Shift"
                                            Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.InsertFilterItemFromTextCommand}"
                                            CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                <KeyBinding Key="N"
                                            Modifiers="Control+Shift"
                                            Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.NewFromTextCommand}"
                                            CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                <KeyBinding Key="Q"
                                            Modifiers="Control+Shift"
                                            Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.QuickFindTextCommand}"
                                            CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                            </DataGrid.InputBindings>
                            <DataGrid.ContextMenu>
                                <ContextMenu HasDropShadow="True">
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding CopyCommand}"
                                              CommandParameter="{Binding Path=ContentList}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="copy"
                                              InputGestureText="Ctrl+C"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=LogViewModel.CloseCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="close file"
                                              InputGestureText="Ctrl+F4"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=LogViewModel.CloseAllCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="close all files"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=LogViewModel.CopyFilePathCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="copy file path"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=LogViewModel.ExportCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="export file"
                                              InputGestureText="Ctrl+E"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=LogViewModel.FindNextCommand}"
                                              CommandParameter="{Binding}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="find next"
                                              InputGestureText="F3"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=LogViewModel.FindPreviousCommand}"
                                              CommandParameter="{Binding}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="find previous"
                                              InputGestureText="Shift+F3"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=FilterViewModel.GotoLineCommand}"
                                              CommandParameter="{Binding}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="goto filter"
                                              InputGestureText="Ctrl+Alt+G"
                                              Style="{DynamicResource MenuItemStyle1}" />

                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=LogViewModel.GotoLineCommand}"
                                              CommandParameter="{Binding}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="goto line"
                                              InputGestureText="Ctrl+G"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=LogViewModel.OpenFolderCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="open containing folder"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=LogViewModel.OpenCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="open file"
                                              InputGestureText="Ctrl+O"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=LogViewModel.NewCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="open view in new tab"
                                              InputGestureText="Ctrl+N"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=LogViewModel.PasteCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="paste"
                                              InputGestureText="Ctrl+V"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="recent files"
                                              ItemsSource="{Binding Source={StaticResource mainViewModel},
                                                                    Path=LogViewModel.RecentCollection}"
                                              Style="{DynamicResource MenuItemStyle1}">
                                        <MenuItem.ItemContainerStyle>
                                            <Style TargetType="{x:Type MenuItem}">
                                                <Setter Property="MenuItem.Background"
                                                        Value="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                                                <Setter Property="MenuItem.BorderBrush"
                                                        Value="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                                                <Setter Property="MenuItem.Command"
                                                        Value="{Binding Command}" />
                                                <Setter Property="MenuItem.CommandParameter"
                                                        Value="{Binding Text}" />

                                                <Setter Property="MenuItem.Foreground"
                                                        Value="{Binding Source={StaticResource settings}, Path=Settings.ForegroundColor}" />
                                                <Setter Property="MenuItem.Header"
                                                        Value="{Binding Text}" />
                                            </Style>
                                        </MenuItem.ItemContainerStyle>
                                    </MenuItem>
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=LogViewModel.ReloadCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="reload file"
                                              InputGestureText="Ctrl+R"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=LogViewModel.SaveAsCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="save current view"
                                              InputGestureText="Ctrl+S"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                                                   Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                                    Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                                                Path=LogViewModel.HideCommand}"
                                              CommandParameter="{Binding}"
                                              Foreground="{Binding Source={StaticResource settings},
                                                                   Path=Settings.ForegroundColor}"
                                              Header="show / hide all items"
                                              InputGestureText="Ctrl+H"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                    <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                                              BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                                              Command="{Binding Source={StaticResource mainViewModel},
                                            Path=LogViewModel.ViewMessageCommand}"
                                              Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                                              Header="view _message"
                                              InputGestureText="Ctrl+M"
                                              Style="{DynamicResource MenuItemStyle1}" />
                                </ContextMenu>
                            </DataGrid.ContextMenu>
                        </DataGrid>
                    </DataTemplate>
                </TabControl.ContentTemplate>

                <TabControl.ContextMenu>
                    <ContextMenu HasDropShadow="True">
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding LogViewModel.CloseCommand}"
                                  CommandParameter="{Binding}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="close file"
                                  InputGestureText="Ctrl+F4"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding LogViewModel.CloseAllCommand}"
                                  CommandParameter="{Binding}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="close all files"
                                  InputGestureText="Ctrl+Shift+F4"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding LogViewModel.CopyFilePathCommand}"
                                  CommandParameter="{Binding}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="copy file path"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding Source={StaticResource mainViewModel},
                                                    Path=LogViewModel.FindNextCommand}"
                                  CommandParameter="{Binding}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="find next"
                                  InputGestureText="F3"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding Source={StaticResource mainViewModel},
                                                    Path=LogViewModel.FindPreviousCommand}"
                                  CommandParameter="{Binding}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="find previous"
                                  InputGestureText="Shift+F3"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding LogViewModel.OpenFolderCommand}"
                                  CommandParameter="{Binding}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="open containing folder"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding LogViewModel.OpenCommand}"
                                  CommandParameter="{Binding}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="open file"
                                  InputGestureText="Ctrl+O"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                               Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                Path=Settings.BackgroundColor}"
                                  Command="{Binding LogViewModel.NewCommand}"
                                  CommandParameter="{Binding}"
                                  Foreground="{Binding Source={StaticResource settings},
                                               Path=Settings.ForegroundColor}"
                                  Header="open view in _new tab"
                                  InputGestureText="Ctrl+N"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding LogViewModel.PasteCommand}"
                                  CommandParameter="{Binding}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="paste"
                                  InputGestureText="Ctrl+V"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="recent files"
                                  ItemsSource="{Binding LogViewModel.RecentCollection}"
                                  Style="{DynamicResource MenuItemStyle1}">
                            <MenuItem.ItemContainerStyle>
                                <Style TargetType="{x:Type MenuItem}">
                                    <Setter Property="MenuItem.Background"
                                            Value="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                                    <Setter Property="MenuItem.BorderBrush"
                                            Value="{Binding Source={StaticResource settings}, Path=Settings.BackgroundColor}" />
                                    <Setter Property="MenuItem.Command"
                                            Value="{Binding Command}" />
                                    <Setter Property="MenuItem.CommandParameter"
                                            Value="{Binding Text}" />

                                    <Setter Property="MenuItem.Foreground"
                                            Value="{Binding Source={StaticResource settings}, Path=Settings.ForegroundColor}" />
                                    <Setter Property="MenuItem.Header"
                                            Value="{Binding Text}" />
                                </Style>
                            </MenuItem.ItemContainerStyle>
                        </MenuItem>
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding LogViewModel.ReloadCommand}"
                                  CommandParameter="{Binding}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="reload file"
                                  InputGestureText="Ctrl+R"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding LogViewModel.RenameCommand}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="rename file"
                                  InputGestureText="F2"
                                  Style="{DynamicResource MenuItemStyle1}" />
                        <MenuItem Background="{Binding Source={StaticResource settings},
                                                       Path=Settings.BackgroundColor}"
                                  BorderBrush="{Binding Source={StaticResource settings},
                                                        Path=Settings.BackgroundColor}"
                                  Command="{Binding LogViewModel.SaveAsCommand}"
                                  CommandParameter="{Binding}"
                                  Foreground="{Binding Source={StaticResource settings},
                                                       Path=Settings.ForegroundColor}"
                                  Header="save current view"
                                  InputGestureText="Ctrl+S"
                                  Style="{DynamicResource MenuItemStyle1}" />
                    </ContextMenu>
                </TabControl.ContextMenu>
            </TabControl>
        </Grid>
    </DockPanel>
</Window>